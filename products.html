<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.2/firebase.js"></script>
    <script type="text/javascript" src="qrcode.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/hmac-sha256.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/enc-base64.min.js"></script>

    <script>
      var firebaseConfig = {
    apiKey: "AIzaSyD5mIkilaZHivFJuTc2jUOXpLZ73MGqGhk",
    authDomain: "dequani-95ddd.firebaseapp.com",
    databaseURL: "https://dequani-95ddd.firebaseio.com",
    projectId: "dequani-95ddd",
    storageBucket: "dequani-95ddd.appspot.com",
    messagingSenderId: "1031452676177",
    appId: "1:1031452676177:web:ddc72ab3f3402795a42870",
    measurementId: "G-LVWVL2SPRQ"
  };
      firebase.initializeApp(firebaseConfig);
      var sendBatch = "Dequani"
     
    </script>
    <title>Products</title>

    <link href="style.css" rel="stylesheet">
</head>
<style>
             .modal-header{
                background-color: #222222;
                color:white;
             }
             .modal-body{
                background-color: #282020;
                color:white;
             }
             .modal-footer{
                background-color:  #282020;
                color:white;
             }
    </style>
    <style type="text/css">
        body {
  font-family: Arial, sans-serif;
  background: url(http://www.shukatsu-note.com/wp-content/uploads/2014/12/computer-564136_1280.jpg) no-repeat;
  background-size: cover;
  height: 100vh;
}



    </style>
<body>
    <header>
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mynavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="index.html" class="navbar-brand">Dequani store</a>
                </div>

            </div>
        </nav>
    </header>
    <main>
        <div class="container">
            <div class="jumbotron jumbotron_style">
                <h1>Welcome to our Dequani store!</h1>
                <p> Because you love original
                </p>
            </div>
            <div class="padding-20"></div>
            <div class="row text-center">
                <div class="col-md-3 col-sm-6">
                    <div class="thumbnail">
                        <img src="img/camera.jpg" alt="Nikon">
                        <div class="caption">
                            <h3>Nikon NX21</h3>
                            <p>Rs.36000.00</p>
                            <button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch = 'Nikon'">Buy</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 ">
                    <div class="thumbnail">
                        <img src="img/camera2.jpg" alt="Sony">
                        <div class="caption">
                            <h3>Sony LDS</h3>
                            <p>Rs.32000.00</p>
                           <!-- Trigger the modal with a button -->
<button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch = 'Sony'">Buy</button>


                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-6 ">
                    <div class="thumbnail">
                        <img src="img/camera3.jpg" alt="cannon">
                        <div class="caption">
                            <h3>Cannon EDS70D</h3>
                            <p>Rs.29000.00</p>


                            <!-- Trigger the modal with a button -->
<button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch= 'Cannon'">Buy</button>



                            





                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 ">
                    <div class="thumbnail">
                        <img src="img/camera4.jpg" alt="Panasonic">
                        <div class="caption">
                            <h3>Lumix2</h3>
                            <p>Rs.33000.00</p>
                            <button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch = 'Lumix2'">Buy</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-md-3 col-sm-6">
                    <div class="thumbnail">
                        <img src="img/watch.jpg" alt="watch">
                        <div class="caption">
                            <h3>Y&K</h3>
                            <p>Rs.3000.00</p>
                            <button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch = 'Y&K'">Buy</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 ">
                    <div class="thumbnail">
                        <img src="img/watch2.jpg">
                        <div class="caption">
                            <h3>Casio G-Shock</h3>
                            <p>Rs.6000.00</p>
                           <button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch = 'Casio'">Buy</button>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-6 ">
                    <div class="thumbnail">
                        <img src="img/watch3.jpg" alt="Watch">
                        <div class="caption">
                            <h3>Omega</h3>
                            <p>Rs.2000.00</p>
                           <button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch = 'Omega'">Buy</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 ">
                    <div class="thumbnail">
                        <img src="img/watch4.jpg " alt="Watch">
                        <div class="caption">
                            <h3>Diesel 3bar</h3>
                            <p>Rs.3300.00</p>
                            <button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch = 'Diesel'">Buy</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-md-3 col-sm-6">
                    <div class="thumbnail">
                        <img src="img/shirt.jpg" alt="Tommy">
                        <div class="caption">
                            <h3>Tommy Hilfigher</h3>
                            <p>Rs.3600.00</p>
                            <button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch = 'Tommy'">Buy</button>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-6 ">
                    <div class="thumbnail">
                        <img src="img/shirt2.jpg" alt="U.S.Polo">
                        <div class="caption">
                            <h3>U.S. Polo</h3>
                            <p>Rs.970.00</p>
                            <button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch = 'U.S.'">Buy</button>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-6 ">
                    <div class="thumbnail">
                        <img src="img/shirt3.jpg" alt="cannon">
                        <div class="caption">
                            <h3>Allen Solly</h3>
                            <p>Rs.2900.00</p>
                            <button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch = 'Allen'">Buy</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 ">
                    <div class="thumbnail">
                        <img src="img/shirt4.jpg">
                        <div class="caption">
                            <h3>UCB</h3>
                            <p>Rs.960.00</p>
                            <button type="button" class="btn btn-info btn-lg add-to-cart" data-toggle="modal" data-target="#myModal" onclick="sendBatch = 'UCB'">Buy</button>
                        </div>
                    </div>
                </div>

            </div>
            <div class="padding-20"></div>
        </div>
    </main>
    <!-- <footer>
        <div class="container">
            <center>
                Copyright Â© Lifestyle Store. All Rights Reserved and Contact Us: +91 90000 00000
            </center>
        </div>
    </footer> -->
 <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" style="color:white; background-color: red;height: 30px;width: 30px" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Verify your product originality</h4>
        </div>
        <div class="modal-body">
           <center><div style="width:300px; height:30px; margin-top:15px;">Scan qrcode to check originalty</div>
          <button type="button" class="btn btn-primary" onclick="makeCode(sendBatch)";>Let me verify</button>
     <br />
     <div style="width:300px; height:10px; margin-top:15px;"></div>
    <pre><div id="qrcode" style="width:100px; height:100px;"></div></pre>
</center>
        </div>
        <div class="modal-footer">
            <div>
          <a href="buy.html"><button type="button" class="btn btn-primary" >Proceed to pay</button></a></div>
        </div>
      </div>
      
    </div>
  </div>
</body>
    <script type="text/javascript">
      var qrcode = new QRCode(document.getElementById("qrcode"), {
  width : 100,
  height : 100
  });
 var elText="Please verify again";
 function makeCode (BatchID) {  
  var db = firebase.firestore();
  var docRef = db.collection("onlineQRCode").doc(BatchID);

docRef.onSnapshot(function(doc) {
    if (doc.exists) {
         var str=doc.data().eq;
         var list=new Array();
              list[0]=-1;
              var k=1;
              for (var j = 0; j < str.length; j++) {
                if (str.substring(j, j + 1) == '+') {
                  list[k]=j;
                  k++;
                }
              }
              list[k]=str.length;
              var count=0;
              var res = 0;
              for (var j = 0; j < str.length; j++) {
                if (str.substring(j, j + 1) == 'x') {
                  count++;
                  res = res + (Math.pow(
                      parseInt(doc.data().ProductID),
                      parseInt(str.substring(j + 1, list[count]))) *
                      parseInt(str.substring(list[count - 1] + 1, j)));
                }
              }

              elText=BatchID+","+doc.data().ProductID+","+res.toString();
        console.log("Document data:", elText.toString());
    } else {
        // doc.data() will be undefined in this case
        console.log("No such document!");
        
    }
})
// setInterval(function(){ elText=BatchID+","+(parseInt(doc.data().ProductID)+1).toString()+","+res.toString();qrcode.makeCode(elText); }, 10000);
if(elText!="Please verify again"){
    // console.log(elText);
    // var hash = CryptoJS.HmacSHA256(elText, "secret");
    // var hashInBase64 = CryptoJS.enc.Base64.stringify(hash);
    // console.log(hashInBase64);
    qrcode.makeCode(elText);
}
}

makeCode();
 </script>
</html>